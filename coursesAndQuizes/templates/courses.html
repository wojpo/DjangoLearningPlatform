<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>courses</title>
</head>
<body>
    <script>
        let complessons
        let completedUncompletedCounter
    </script>

    {% for course in courses %}
        <script>
            complessons = 0;
        </script>
        <a href={% url 'course-detail' pk=course.pk%}>{{ course.name }}</a>

        {% for lesson in course.lesson_set.all %}
            {% for key,value in if_completed.items %}
                {% if key == lesson.pk %}
                    <script>
                        complessons++;
                    </script>
                {% endif %}
            {% endfor %}
        {% endfor %}
            <p id="comp/uncomp{{ course.pk }}"></p>

            <script>
                completedUncompletedCounter = document.getElementById("comp/uncomp{{ course.pk }}");
                if (complessons === {{ course.lesson_set.all.count }})
                {
                    completedUncompletedCounter.textContent = 'Completed'
                }
                else
                {
                    completedUncompletedCounter.textContent = complessons+'/{{ course.lesson_set.all.count }}';
                }
                console.log(complessons)
            </script>
    {% endfor %}

</body>
</html>
